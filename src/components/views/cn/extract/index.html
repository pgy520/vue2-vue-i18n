<style>
    .important_tips>span>a{text-decoration:underline;color: #00ccff}
    .important_tips{margin-top:10px}
    .tips .help>a{
        margin: 0 20px;
        color: #00ccff
    }
</style>
<div id="extract-ubtc">
    <p style="text-align: center;">
        <strong class="extract_mailbox" style="text-align: center;">
            <%- LANG('资产总额') %>:</strong>
        <br/>
        <span class="extract_lumpsum" style="text-align: center;">
            {{userbalance}}
            <span class="extract_btc">UBTC</span>
        </span>
    </p>
    <!--<p style="height:40px;line-height:40px;font-size:14px;color:#888"><%- LANG('BTC持有者验证金额接收地址')%>:-->
        <!--<span style="height:40px;line-height:40px;font-size:14px;color:#333">1Gp55PCWuNGXFwLqWQoSkiL325Ksj4rhuM</span>-->
    <!--</p>-->
    <p style="height:40px;line-height:40px;">
        <i-button type="primary" size="small" @click="modalhelp=true">
            <%- LANG('SUPPORT')%>
        </i-button>
    </p>

    <div id="tablebox">
        <i-table :loading="loading" :columns="columns1" :data="datafirst" no-data-text="<%- LANG('暂无数据')%>"></i-table>
    </div>

    <div id="pagebox">
        <page  :total="total" show-elevator :current="currentpage"  :page-size="pagesize" @on-change="pagechange"></page>
    </div>



    <Modal class-name="vertical-center-modal" :mask-closable="false" title="<%- LANG('提取货币') %>" v-model="modal" class-name="vertical-center-modal">
        <p class="extract_modal">
            <span>
                <%- LANG('钱包地址')%>
            </span>
            <i-input v-model="balance_address" size="small" placeholder="<%- LANG('钱包地址') %>"></i-input>
        </p>
        <p class="extract_modal">
            <span>
                <%- LANG('提币金额')%>
            </span>
            <span class="allmoney">{{withdrawalAmount}}</span>
        </p>
        <p class="extract_modal">
            <span>
                <%- LANG('图形验证码')%>
            </span>
            <i-input v-model="mail_code" size="small" placeholder="<%- LANG('图形验证码') %>"></i-input>
            <span class='confirm_code' @click="reloadVerifyImg">
                <img id="vierfiyImgId" :src="verifyImgUrl" style="width:100%;height:100%" />
            </span>
        </p>
        <p class="extract_modal">
            <span>
                <%- LANG('登陆密码')%>
            </span>
            <i-input v-model="useraccount_pwd" size="small" placeholder="<%- LANG('登陆密码') %>" type="password"></i-input>
        </p>
        <div slot="close"  @click="modalCancel"><icon type="ios-close-empty"></icon></div>
        <div slot="footer">
            <i-button type="text" size="large" @click="modalCancel">
                <%- LANG('取消')%>
            </i-button>
            <i-button type="primary" size="large" @click="confirmpushbalance">
                <%- LANG('确定')%>
            </i-button>
        </div>
    </Modal>

    <Modal class-name="vertical-center-modal sign-modal" :mask-closable="false" title="<%- LANG('地址验证') %>" v-model="modaladdress" class-name="vertical-center-modal">
        <p class="extract_modal">
            <span>
                <%- LANG('地址')%>
            </span>
            <span class="allmoney">{{moment_address}}</span>
        </p>
        <p class="extract_modal">
            <span>
                <%- LANG('消息')%>
            </span>
            <span class="allmoney">{{vertical_money}}</span>
        </p>

        <p class="extract_modal" style="height:unset">
            <span>
                <%- LANG('签名')%>
            </span>
            <i-input v-model="vertical_sign" type="textarea" :rows="5" placeholder="<%- LANG('请输入你的签名')%>"></i-input>
        </p>

        <p class="help">
            <a :href="signinfo[LAN]" target="_blank" role="button">
                <%- LANG('如何签名?')%>
            </a>

        </p>
        <div slot="close"  @click="verticalcancel"><icon type="ios-close-empty"></icon></div>
        <div slot="footer">
            <i-button type="text" size="large" @click="verticalcancel">
                <%- LANG('取消')%>
            </i-button>
            <i-button type="primary" size="large" @click="verticalcheck">
                <%- LANG('确定')%>
            </i-button>
        </div>
    </Modal>

    <!--帮助信息-->
    <Modal class-name="vertical-center-modal modal_help" title="<%- LANG('SUPPORT') %>" v-model="modalhelp" class-name="vertical-center-modal">
        <div class="tips">
            <p class="tips_content">
                <span><%- LANG('BTC持有者可以提币的额度是BTC区块498777的余额')%></span>
            </p>
            <p class="tips_content">
                <span><%- LANG('BTC持有者验证金额接收地址')%></span>
                <span style="color:#00ccff">&nbsp;1Gp55PCWuNGXFwLqWQoSkiL325Ksj4rhuM</span>
            </p>
        </div>

        <div class="tips">
            <p>
                <span><%- LANG('其他社区的用户请将指定金额打入以下账户来验证地址所有权。您的UBTC余额计算将基于每月一次的余额快照。')%></span>
            </p>
            <p class="tips_content">
                <span>QTUM:</span>
                <span style="color:#00ccff">&nbsp;QgxaPhaMVG48zo7vCnj3xQnkZKmy6RWsRp</span>
            </p>
            <p class="tips_content">
                <span>HSR:</span>
                <span style="color:#00ccff">&nbsp;HFDSPUXwM7iokMfgiJPDuLV2UcWRRr4xFi</span>
            </p>
            <p class="tips_content">
                <span>ETH:</span>
                <span style="color:#00ccff">&nbsp;0x805CC2C7E01226d35CC5dEDc7dA6620Fc0564d92</span>
            </p>
            <p class="tips_content">
                <span>LTC:</span>
                <span style="color:#00ccff">&nbsp;LNrtMAN8nmVGFLgamME4bva2StRhD5eVoZ</span>
            </p>
            <p class="tips_content">
                <span>INK:</span>
                <span style="color:#00ccff">&nbsp;QMwQbjTP8UcZPUhpPbkPVpfeHyYgKEVv6p</span>
            </p>
        </div>
        <div class="tips">
            <p>
                <span><%- LANG('重要提示')%>:</span>
            </p>
            <p class="important_tips">
                1.&nbsp;
                <span style="color:red"><%- LANG('请从您填写的地址转出指定金额，如果您的钱包不允许您指定地址，我们建议您使用一个可以控制的转账地址；')%></span>
            </p>
            <p class="important_tips">
                2.&nbsp;
                <span style="color:red"><%- LANG("请只向我们转入指定金额，无需添加手续费。如果您转入非指定金额，您的地址将不获验证。如有疑问，请联络<a href='/support/faq' target='_blank'>support@ub.com</a>")%></span>
            </p>
        </div>
        <div class="tips">
            <p class="help">
                    <a :href="signinfo[LAN]" target="_blank" role="button">
                            <%- LANG('如何签名?')%>
                    </a>
                    <a :href="withdrawninfo[LAN]" target="_blank" role="button">
                            <%- LANG('提币帮助手册')%>
                    </a>
            </p>
        </div>

        <div slot="footer">

        </div>
    </Modal>
</div>



<script>

    var app = new Vue({
        el: '#extract-ubtc',
        data: function () {
            this.$Message.config({
                top: 180,
                duration: 3
            });
            var tabwidth={
                'cn':[140,320,180,180,200,180,200,248],
                'hk':[140,320,180,180,200,180,200,248],
                'en':[140,320,160,160,200,160,200,308],
                'jp':[120,300,150,150,210,150,200,368],
                'kr':[140,300,180,180,200,180,200,268],
            }
            var _this=this;

            return {
                loading:true,
                currentyMoney: "", //币种类型
                momentbtkind:'',//当前币种
                vertical_money:'',//验证金额
                vertical_sign:'',//签名

                verifyImgUrl: '', //邮箱验证码
                balance_address: '', //钱包地址
                moment_address: '', //当前提币地址,
                balance_kind: 'ub', //提币币种
                periodList:[],//周期列表
                withdrawalAmount: '', //提币数量
                useraccount_pwd: '', //用户登陆密码
                mail_code: '', //用户邮箱验证码
                // 签名手册
                signinfo: {
                    'en': '/news/detail?column=1&id=325',
                    'cn': '/news/detail?column=1&id=324',
                    'hk': '/news/detail?column=1&id=324',
                    'kr': '/news/detail?column=1&id=325',
                    'jp': '/news/detail?column=1&id=325'
                },
                // 提币手册   
                withdrawninfo: {
                    'en': '/news/detail?column=1&id=322',
                    'cn': '/news/detail?column=1&id=323',
                    'hk': '/news/detail?column=1&id=323',
                    'kr': '/news/detail?column=1&id=322',
                    'jp': '/news/detail?column=1&id=322'
                },


                modal: false,
                modaladdress:false,
                modalhelp:false,


                useraccount: '', //用户账号
                userbalance: '', //用户余额总额
                columns1: [{
                        title: "<%- LANG('币种')%>",
                        key: 'currency_type',
                        width: tabwidth[LAN][0],
                        render: function(h, params){
                            return h('div', [
                                h('img', {
                                    attrs: {
                                        src: '/src/images/bt/coin-' + params.row.currency_type
                                            .toLowerCase() + '.png'
                                    },
                                    style: {
                                        width: '20px',
                                        height: '20px',
                                        marginRight: '5px',
                                        border: 'none',
                                        'vertical-align': 'middle'
                                    }
                                }),
                                h('strong', params.row.currency_type)
                            ])
                        }
                    },
                    {
                        title: "<%- LANG('地址')%>",
                        key: 'address',
                        width: tabwidth[LAN][1]
                    },
                    {
                        title: "<%- LANG('验证状态')%>",
                        key: 'deposit_status',
                        width:tabwidth[LAN][2],
                        render: function(h, params){
                            if (params.row.deposit_status == 0) {
                                return h('div', [
                                    h('span', {
                                        props: {

                                        }
                                    }, "<%- LANG('未验证')%>"),
                                ]);
                            } else {
                                return h('div', [
                                    h('span', {
                                        props: {

                                        },
                                        style: {
                                            color: 'orangered'
                                        }
                                    }, "<%- LANG('已验证')%>"),
                                ]);
                            }

                        }
                    },
                    {
                        title:"<%- LANG('验证金额')%>",
                        key:'mark_balance',
                        width:tabwidth[LAN][3]

                    },
                    {
                        title: "<%- LANG('未激活余额')%>",
                        key: 'noActive_final_balance',
                        width:tabwidth[LAN][4]
                    },
                    {
                        title: "<%- LANG('余额')%>",
                        key: 'final_balance',
                        width:tabwidth[LAN][5]
                    },
                    {
                        title: "<%- LANG('提币状态')%>",
                        key: 'withdraw_status',
                        width:tabwidth[LAN][6],
                        render: function(h, params){
                            if (params.row.withdraw_status == 0) {
                                return h('div', [
                                    h('span', {
                                        props: {

                                        }
                                    }, "<%- LANG('未提币')%>"),
                                ]);
                            } else if (params.row.withdraw_status == 1) {
                                return h('div', [
                                    h('span', {
                                        props: {

                                        },
                                        style: {
                                            color: 'red'
                                        }
                                    }, "<%- LANG('待处理')%>"),
                                ]);
                            } else {
                                return h('div', [
                                    h('span', {
                                        props: {

                                        },
                                        style: {
                                            color: 'orangered'
                                        }
                                    }, "<%- LANG('已提币')%>"),
                                ]);
                            }

                        }
                    },
                    {
                        title: "<%- LANG('操作')%>",
                        key: 'action',
                        width: tabwidth[LAN][7],
                        render: function(h, params){
                            //所有币种
                            var allbt=_this.currentyMoney;
                            //激活状态
                            var isactive=params.row.active_status;

                            //是否需要开启提币
                            var needopenbt= true;


                            //如果是btc，激活按钮无需显示，
                            if(isactive==2)
                            {
                                //余额为0/未验证/已提币 提币操作不可用
                                if (params.row.final_balance == 0 || params.row.deposit_status == 0 ||
                                    params.row.withdraw_status !== 0) {
                                    //未验证状态
                                    if(params.row.deposit_status == 0)
                                    {
                                        return h('div', [
                                            h('Button', {
                                                props: {
                                                    type: 'text',
                                                    size: 'small',
                                                    disabled:true
                                                },
                                                style: {
                                                    background: '#ccc'
                                                }
                                            }, "<%- LANG('提币')%>")/**,
                                            h('Button', {
                                                props: {
                                                    type: 'text',
                                                    size: 'small',
                                                },
                                                style:{
                                                    marginLeft:'10px'
                                                },
                                                on: {
                                                    click: function(){
                                                        _this.moment_address=params.row.address
                                                        _this.vertical_money=params.row.mark_balance
                                                        for(var key in allbt)
                                                        {
                                                            if(params.row.currency_type==key)
                                                            {
                                                                _this.momentbtkind=allbt[key]
                                                                break;
                                                            }
                                                        }
                                                        _this.modaladdress=true;
                                                    }
                                                }

                                            }, "<%- LANG('地址验证')%>"),*/
                                        ]);
                                    }
                                    else
                                    {
                                        return h('div', [
                                            h('Button', {
                                                props: {
                                                    type: 'text',
                                                    size: 'small',
                                                    disabled:true
                                                },
                                                style: {
                                                    background: '#ccc'
                                                }
                                            }, "<%- LANG('提币')%>"),
                                           /* h('Button', {
                                                props: {
                                                    type: 'text',
                                                    size: 'small',
                                                    disabled:true
                                                },
                                                style: {
                                                    background: '#ccc',
                                                    marginLeft:'10px'
                                                }
                                            }, "<%- LANG('地址验证')%>"),*/
                                        ]);
                                    }



                                }
                                else
                                {
                                    //提币操作可用
                                    return h('div', [
                                        h('Button', {
                                            props: {
                                                type: 'text',
                                                size: 'small',
                                                disabled:!needopenbt //add for upload
                                            },
                                            style:{
                                                 background:needopenbt?'#38bde9':'#ccc'
                                            },
                                            on: {
                                                click: function(){
                                                    _this.withdrawalAmount = params.row.final_balance
                                                    _this.moment_address = params.row.address
                                                    _this.show(params.row.currency_type)
                                                }
                                            }
                                        }, "<%- LANG('提币')%>"),
                                       /* h('Button', {
                                            props: {
                                                type: 'text',
                                                size: 'small',
                                                disabled:true
                                            },
                                            style: {
                                                background: '#ccc',
                                                marginLeft:'10px'
                                            }
                                        }, "<%- LANG('地址验证')%>"),*/

                                    ]);

                                }
                            }
                            else
                            {
                                //其他币种，需要先激活，才能提币
                                var activebtncolor=isactive?'#ccc':'#38bde9'

                                //余额为0/未验证/已提币/未激活 提币操作不可用
                                if (params.row.final_balance == 0 || params.row.deposit_status == 0 ||
                                    params.row.withdraw_status !== 0) {
                                    //未验证状态
                                    if(params.row.deposit_status == 0)
                                    {
                                        return h('div', [
                                            //提币按钮
                                            h('Button', {
                                                props: {
                                                    type: 'text',
                                                    size: 'small',
                                                    disabled:true
                                                },
                                                style: {
                                                    background: '#ccc'
                                                }
                                            }, "<%- LANG('提币')%>"),
                                            h('Button', {
                                                props: {
                                                    type: 'text',
                                                    size: 'small',
                                                },
                                                style:{
                                                    marginLeft:'10px'
                                                },
                                                on: {
                                                    click: function(){
                                                        _this.moment_address=params.row.address
                                                        _this.vertical_money=params.row.mark_balance
                                                        for(var key in allbt)
                                                        {
                                                            if(params.row.currency_type==key)
                                                            {
                                                                _this.momentbtkind=allbt[key]
                                                                break;
                                                            }
                                                        }
                                                        _this.modaladdress=true;
                                                    }
                                                }

                                            }, "<%- LANG('地址验证')%>"),
                                            //激活按钮不可用
                                            h('Button', {
                                                props: {
                                                    type: 'text',
                                                    size: 'small',
                                                    disabled:true
                                                },
                                                style: {
                                                    background: '#ccc',
                                                    marginLeft:'10px'
                                                },
                                                on:{
                                                    click:function(){
                                                        _this.Activebalance(params.row.record_id,params.row.noActive_final_balance)
                                                    }
                                                }
                                            }, "<%- LANG('激活')%>"),
                                        ]);
                                    }
                                    else
                                    {
                                        var canactive=params.row.noActive_final_balance==0?true:false
                                        var activebtn=canactive?'#ccc':'#38bde9'
                                        return h('div', [
                                            //提币按钮
                                            h('Button', {
                                                props: {
                                                    type: 'text',
                                                    size: 'small',
                                                    disabled:true
                                                },
                                                style: {
                                                    background: '#ccc'
                                                }
                                            }, "<%- LANG('提币')%>"),
                                            h('Button', {
                                                props: {
                                                    type: 'text',
                                                    size: 'small',
                                                    disabled:true
                                                },
                                                style: {
                                                    background: '#ccc',
                                                    marginLeft:'10px'
                                                }
                                            }, "<%- LANG('地址验证')%>"),
                                            //激活按钮
                                            h('Button', {
                                                props: {
                                                    type: 'text',
                                                    size: 'small',
                                                    disabled:canactive?true:false
                                                },
                                                style: {
                                                    background: activebtn,
                                                    marginLeft:'10px'
                                                },
                                                on:{
                                                    click:function(){
                                                        _this.Activebalance(params.row.record_id,params.row.noActive_final_balance)
                                                    }
                                                }
                                            }, "<%- LANG('激活')%>"),
                                        ]);
                                    }



                                }
                                else
                                {
                                    //提币操作可用
                                    var canactive=(params.row.noActive_final_balance!==0&&params.row.active_status==0)?true:false
                                    var activebtn=canactive?'#38bde9':'#ccc'
                                    return h('div', [
                                        //提币按钮
                                        h('Button', {
                                            props: {
                                                type: 'text',
                                                size: 'small',
                                                disabled:!needopenbt
                                            },
                                            style:{
                                                background:needopenbt?'#38bde9':'#ccc'
                                            },
                                            on: {
                                                click: function(){
                                                    _this.withdrawalAmount = params.row.final_balance
                                                    _this.moment_address = params.row.address
                                                    _this.periodList = params.row.periodStr == null ? [] : params.row.periodStr.split(",").map(function(i){ return parseInt(i)})
                                                    _this.show(params.row.currency_type)
                                                }
                                            }
                                        }, "<%- LANG('提币')%>"),
                                        h('Button', {
                                            props: {
                                                type: 'text',
                                                size: 'small',
                                                disabled:true
                                            },
                                            style: {
                                                background: '#ccc',
                                                marginLeft:'10px'
                                            }
                                        }, "<%- LANG('地址验证')%>"),
                                        //激活按钮
                                        h('Button', {
                                            props: {
                                                type: 'text',
                                                size: 'small',
                                                disabled:canactive?false:true
                                            },
                                            style: {
                                                background: activebtncolor,
                                                marginLeft:'10px'
                                            },
                                            on:{
                                                click:function(){
                                                    _this.Activebalance(params.row.record_id,params.row.noActive_final_balance)
                                                }
                                            }
                                        }, "<%- LANG('激活')%>"),

                                    ]);

                                }
                            }


                        }

                    }
                ],
                datafirst: [], //第一页数据
                pagesize: 6,//每页数量
                total: 0,//总条数
                currentpage:1,//当前页
                data1: [

                ]
            }
        },
        methods: {
            //判断当前地址是否激活
            //分页插件国际化
            pageInternation:function(){
                switch(LAN){
                    case 'en':
                        $('.goto').html('Goto')
                        $('.ub_page').html('Page')
                        $('.ivu-page-next').attr('title','Nextpage')
                        $('.ivu-page-prev').attr('title','Prepage')
                        break;
                    case 'cn':
                        $('.goto').html('跳至')
                        $('.ub_page').html('页')
                        $('.ivu-page-next').attr('title','下一页')
                        $('.ivu-page-prev').attr('title','上一页')
                        break;
                    case 'jp':
                        $('.goto').html('ジャンプから')
                        $('.ub_page').html('ページ')
                        $('.ivu-page-next').attr('title','次のページ')
                        $('.ivu-page-prev').attr('title','前のページ')
                        break;
                    case 'hk':
                        $('.goto').html('跳至')
                        $('.ub_page').html('頁')
                        $('.ivu-page-next').attr('title','下一頁')
                        $('.ivu-page-prev').attr('title','上一頁')
                        break;
                    case 'kr':
                        $('.goto').html('뛰어 ~')
                        $('.ub_page').html('페이지')
                        $('.ivu-page-next').attr('title','다음 페이지')
                        $('.ivu-page-prev').attr('title','페이지')
                        break;
                    default:break;
                }
            },
            //切换分页
            pagechange:function(page) {
                this.currentpage=page;
                var arrtotal = [];
                arrtotal = this.data1;
                var startindex = (page - 1) * this.pagesize
                var endindex = startindex + this.pagesize
                this.datafirst = arrtotal.slice(startindex, endindex)
            },
            //获取币种种类
            getMoneykind:function(){
                var _this=this;
                Methods.ajax({
                    type: 'POST',
                    url: DOMAIN_MAIN + '/portals/currency/getcurrency',
                    success: function(res){
                        console.log('resmoney', res)
                        _this.currentyMoney = res.content;
                    },
                    error: function(err){
                        _this.$Message.error(err.errorText)
                    }
                })
            },
            //激活余额
            Activebalance:function(recid,noactive) {
                var _this=this;
                Methods.ajax({
                    type: 'POST',
                    url: DOMAIN_MAIN + '/portals/monthbalance/activeBalance',
                    data:{
                        "recordId":recid, //记录Id,userbalance接口有返回
                        "activeBalance":noactive.toString()//未激活余额，需要字符串类型
                    },
                    success: function(res){
                        _this.$Message.success("<%- LANG('激活成功')%>")
                        _this.getuserbalance()
                    },
                    error: function(err){
                        _this.$Message.error("<%- LANG('激活失败')%>")
                    }
                })
            },
            //获取账户余额，
            getuserbalance:function(){
                var _this=this;
                Methods.ajax({
                    type: 'POST',
                    url: DOMAIN_MAIN + '/portals/coinrecord/userbalance',
                    success: function(res){
                        // console.log(res)
                        _this.loading=false;
                        _this.userbalance = res.total;
                        var totaldata = res.details;
                        _this.datafirst = totaldata.slice(_this.currentpage-1, _this.pagesize);
                        _this.data1 = res.details;
                        _this.total = res.details.length;

                    },
                    error: function(err){
                        _this.loading=false;
                        _this.$Message.error(UB.L(err.errorText));
                    }
                });
            },
            show:function(currenttype) {
                this.balance_kind=currenttype
                this.modal = true;
            },
            modalCancel:function() {
                this.modal = false;
                this.balance_address=''
                this.mail_code=''
                this.useraccount_pwd=''

            },
            //点击刷新图形验证码
            reloadVerifyImg:function(){

                this.verifyImgUrl = DOMAIN_MAIN + '/portals/validatecode/getvalidatecode' + "?" + "date=" + (
                    new Date()).getTime();

            },
            //地址验证
            verticalcheck:function(){
               if(this.vertical_sign.trim()==='')
               {
                   this.$Message.warning("<%- LANG('签名不能为空')%>")
                   return;
               }
               var _this=this;
                Methods.ajax({
                    type: 'POST',
                    data: {
                        "sign": _this.vertical_sign,
                        "address": _this.moment_address,
                        "msg": _this.vertical_money.toString(),
                        "currencyType": _this.momentbtkind
                    },
                    url: DOMAIN_MAIN + '/portals/currency/verifysignmessage',
                    success: function(res){
                        if(!res.isVerify)
                        {
                            _this.$Message.error("<%- LANG('签名错误')%>")
                            return;
                        }
                        _this.$Message.success("<%- LANG('签名验证成功')%>")
                        _this.modaladdress = false;
                        _this.vertical_sign=''
                        _this.getuserbalance()
                    },
                    error: function(err){
                        _this.$Message.error(err.errorText)
                    }
                });


            },
            verticalcancel:function(){
                this.modaladdress = false;
                this.vertical_sign=''
            },
            confirmpushbalance:function() {
                if (this.balance_address == '') {
                    // JuaBox.info(UB.L("<%- LANG('钱包地址不能为空') %>"));
                    this.$Message.warning("<%- LANG('钱包地址不能为空') %>")

                    return;
                }
                if (this.balance_address.length < 26 || this.balance_address.length > 34) {
                    this.$Message.warning("<%- LANG('钱包地址有误') %>")
                    return;
                }
                if (this.mail_code == '') {
                    this.$Message.warning("<%- LANG('图形验证码不能为空') %>")
                    return;
                }
                if (this.useraccount_pwd == '') {
                    this.$Message.warning("<%- LANG('登陆密码不能为空') %>")
                    return;
                }
                var _this=this;
                Methods.ajax({
                    type: 'POST',
                    data: {
                        "withdrawalAmount": _this.withdrawalAmount.toString(), //提币数量 一个地址必须一次全部提完
                        "withdrawalAddress": _this.balance_address, //用户btc地址注意和提币地址区分开来,此地址是用户为了领取ubtc提交的
                        "recAddress": _this.moment_address, //用户提币的ubtc地址 用来接收的ubtc
                        "recCurrencyType": _this.balance_kind, // ub 货币类型 目前只有ub
                        "verificationCode": _this.mail_code, //验证码
                        "password": _this.useraccount_pwd, //"登录密码
                        "periodList":_this.periodList//周期

                    },
                    url: DOMAIN_MAIN + '/portals/withdrawal/withDrawUbtcDistribute',
                    success: function(res){
                        console.log(res)
                        _this.$Message.success("<%- LANG('提币成功')%>")
                        _this.modal = false;
                        _this.balance_address=''
                        _this.mail_code=''
                        _this.useraccount_pwd=''
                        _this.getuserbalance()
                    },
                    error: function(err){
                        _this.$Message.error(err.errorText)
                        _this.mail_code = ''
                        _this.reloadVerifyImg();

                    }
                });
                // JuaBox.info(UB.L('提币成功'));
            }

        },
        beforeCreate:function() {
            // 创建之前未登陆路由拦截 sign
            if (!window.sessionStorage.getItem('mail')) {
                window.location = '/user/login'
            }
            // console.log($(window).height())


        },
        created:function() {
            var _this=this;
            $(document).ready(function(){
                _this.getuserbalance()
                 if(JuaBox.isMobile())
                 {
                     $('.extract_modal .ivu-input-wrapper .ivu-input').attr('placeholder','')
                    var tabsize = Math.floor(($(window).height() - 60 - 100 -10 - 80 - 40 * 2 - 32 - 10) / 48)
                 }
                 else
                {
                   var tabsize = Math.floor(($(window).height() - 60 - 100 * 2 - 80 - 40 * 2 - 32 - 10) / 48)
                }
                
                _this.pagesize = tabsize
            })

            this.reloadVerifyImg();


            window.sessionStorage.getItem('mail') ? this.useraccount = window.sessionStorage.getItem('mail') : ''
        },
        mounted:function(){
             this.pageInternation()

            this.getMoneykind()
        },
    })
</script>